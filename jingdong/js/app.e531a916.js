(function(){"use strict";var t={3426:function(t,e,n){n.d(e,{j:function(){return o}});var a=n(3907),s=n(6252);const o=t=>{const e=(0,a.oR)(),n=e.state.cartList,o=(t,n,a,s)=>{e.commit("changeItem",{shopId:t,productId:n,productInfo:a,num:s})},r=(0,s.Fl)((()=>{const e=n[t]?.productList||{};return e})),c=(0,s.Fl)((()=>{const e=n[t]?.shopName||"";return e})),i=(0,s.Fl)((()=>{const e=n[t]?.productList,a={total:0,price:0};if(e)for(let t in e){console.log(e[t]);const n=e[t];a.total+=n.count,a.price+=n.count*n.price}return a.price=a.price.toFixed(2),a}));return{changeItem:o,cartList:n,productList:r,shopName:c,productCompute:i}}},8434:function(t,e,n){var a=n(9963),s=n(6252);function o(t,e,n,a,o,r){const c=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(c)}var r={name:"App"},c=n(3744);const i=(0,c.Z)(r,[["render",o]]);var l=i,d=n(2119),u=n(8502),p=n(1776),m=n(3732),v=n(2854),h=n(5749),g=n(7908),f=n(1509);const _=[{path:"/",name:"Home",component:u["default"],component:()=>n.e(177).then(n.bind(n,8502))},{path:"/profile",name:"Profile",component:()=>n.e(177).then(n.bind(n,5809))},{path:"/cartList",name:"CartList",component:g["default"],component:()=>Promise.resolve().then(n.bind(n,7908))},{path:"/order/:id",name:"Order",component:f["default"],component:()=>Promise.resolve().then(n.bind(n,1509))},{path:"/orderlist",name:"OrderList",component:h["default"],component:()=>Promise.resolve().then(n.bind(n,5749))},{path:"/shop/:id",name:"Shop",component:v["default"],component:()=>Promise.resolve().then(n.bind(n,2854))},{path:"/login",name:"Login",component:p["default"],component:()=>Promise.resolve().then(n.bind(n,1776)),beforeEnter(t,e,n){console.log(t,e);const a=localStorage.isLogin;a?n({name:"Home"}):n()}},{path:"/register",name:"Register",component:m["default"],component:()=>Promise.resolve().then(n.bind(n,3732)),beforeEnter(t,e,n){const a=localStorage.isLogin;a?n({name:"Home"}):n()}}],w=(0,d.p7)({history:(0,d.r5)(),routes:_});w.beforeEach(((t,e,n)=>{const{isLogin:a}=localStorage,{name:s}=t,o="Login"===s||"Register"===s;a||o?n():n({name:"Login"})}));var b=w,k=n(3907);const C=t=>{const{cartList:e}=t,n=JSON.stringify(e);localStorage.cartList=n},y=()=>{try{return JSON.parse(localStorage.cartList)}catch(t){return{}}};var L=k.ZP.createStore({state:{cartList:y()},getters:{},mutations:{changeItem(t,e){const{shopId:n,productId:a,productInfo:s,num:o}=e;let r=t.cartList[n];r||(r={shopName:"",productList:{}});let c=r.productList[a];c||(c=s,c.count=0),c.count=c.count+o,r.productList[a]=c,c.count<0&&(c.count=0),c.count>100&&(c.count=99),t.cartList[n]=r,C(t)},clearCart(t,e){const{shopId:n}=e;t.cartList[n]={},console.log(t.cartList),C(t)},cartShopName(t,e){const{shopId:n,shopName:a}=e,s=t.cartList[n]||{shopName:"",productList:[{}]};s.shopName=a,t.cartList[n]=s,C(t)},clearCartData(t,e){t.cartList[e].productList={}}}});(0,a.ri)(l).use(L).use(b).mount("#app")},4471:function(t,e,n){n.d(e,{U:function(){return r},v:function(){return c}});var a=n(9669),s=n.n(a);const o=s().create({baseURL:"https://www.fastmock.site/mock/ae8e9031947a302fed5f92425995aa19/jd",timeout:1e4}),r=(t,e={})=>new Promise(((n,a)=>{o.get(t,{params:e}).then((t=>{n(t.data)}),(t=>{a(t)}))})),c=(t,e={})=>new Promise(((n,a)=>{o.post(t,e,{baseURL:"https://www.fastmock.site/mock/ae8e9031947a302fed5f92425995aa19/jd",headers:{"Content-Type":"application/json"}}).then((t=>{n(t.data)}),(t=>{a(t)}))}))},3849:function(t,e,n){n.d(e,{Z:function(){return p}});var a=n(6252),s=n(3577);const o={class:"docker"},r=["innerHTML"],c={class:"title"};function i(t,e,n,i,l,d){const u=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.dockerList,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,s.C_)([{docker_item:!0,"docker_item--active":e===n.currentIndex},"docker_item"]),key:t.icon},[(0,a.Wm)(u,{to:t.to},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"iconfont",innerHTML:t.icon},null,8,r),(0,a._)("div",c,(0,s.zw)(t.text),1)])),_:2},1032,["to"])],2)))),128))])}var l={name:"Docker",props:["currentIndex"],setup(){const t=[{icon:"&#xe6f3;",text:"首页",to:{name:"Home"}},{icon:"&#xe7e5;",text:"购物车",to:{name:"CartList"}},{icon:"&#xe61e;",text:"订单",to:{name:"OrderList"}},{icon:"&#xe660;",text:"我的",to:{name:"Home"}}];return{dockerList:t}}},d=n(3744);const u=(0,d.Z)(l,[["render",i],["__scopeId","data-v-50e6a769"]]);var p=u},7402:function(t,e,n){n.d(e,{Z:function(){return _}});var a=n(6252),s=n(3577);const o={class:"shop"},r=["src"],c={class:"shop_text"},i={class:"biaoti"},l={class:"tags"},d={class:"tag"},u={class:"tag"},p={class:"tag"},m={class:"highlight"};function v(t,e,n,v,h,g){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("img",{src:n.item.imgUrl,class:"shop_img"},null,8,r),(0,a._)("div",c,[(0,a._)("div",i,(0,s.zw)(n.item.name),1),(0,a._)("div",l,[(0,a._)("span",d,"月售: "+(0,s.zw)(n.item.sales),1),(0,a._)("span",u,"起送: "+(0,s.zw)(n.item.expressLimit),1),(0,a._)("span",p,"基础运费: "+(0,s.zw)(n.item.expressPrice),1)]),(0,a._)("p",m,(0,s.zw)(n.item.slogan),1)])])}var h={name:"ShopInfo",props:["item"]},g=n(3744);const f=(0,g.Z)(h,[["render",v],["__scopeId","data-v-52cfbe48"]]);var _=f},5217:function(t,e,n){n.d(e,{Z:function(){return p},p:function(){return l}});var a=n(6252),s=n(3577);const o={class:"toast"};function r(t,e,n,r,c,i){return(0,a.wg)(),(0,a.iD)("div",o,(0,s.zw)(n.message),1)}var c=n(2262),i={props:["message"]};const l=()=>{const t=(0,c.qj)({showToast:!1,toastMessage:""}),e=e=>{t.showToast=!0,t.toastMessage=e,setTimeout((()=>{t.showToast=!1,t.toastMessage=""}),3e3)};return{toastData:t,showToast:e}};var d=n(3744);const u=(0,d.Z)(i,[["render",r],["__scopeId","data-v-bd2cb964"]]);var p=u},7908:function(t,e,n){n.r(e);const a={},s=a;e["default"]=s},8502:function(t,e,n){n.r(e),n.d(e,{default:function(){return H}});var a=n(6252);const s={class:"wrapper"};function o(t,e,n,o,r,c){const i=(0,a.up)("StaticPart"),l=(0,a.up)("Nearby"),d=(0,a.up)("Docker");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[(0,a.Wm)(i),(0,a.Wm)(l)]),(0,a.Wm)(d,{currentIndex:0})],64)}var r=n(3577);const c=t=>((0,a.dD)("data-v-e1b0919e"),t=t(),(0,a.Cn)(),t),i=(0,a.uE)('<div class="top-postion" data-v-e1b0919e><span class="iconfont position_icon" data-v-e1b0919e></span> 北京理工大学国防科技园2号楼10层 北京理工大学国防科技园2号楼10层 <span class="iconfont bell_icon" data-v-e1b0919e></span></div><div class="search" data-v-e1b0919e><span class="iconfont" data-v-e1b0919e></span> 山姆会员商店优惠商品 </div><div class="banner" data-v-e1b0919e><img class="banner_img" src="http://www.dell-lee.com/imgs/vue3/banner.jpg" data-v-e1b0919e></div>',3),l={class:"icons"},d=["src"],u={class:"icons_item_text"},p=c((()=>(0,a._)("div",{class:"gap"},null,-1)));function m(t,e,n,s,o,c){return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,(0,a._)("div",l,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.iconsList,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"icons_item",key:t.text},[(0,a._)("img",{class:"icons_item_img",src:`http://www.dell-lee.com/imgs/vue3/${t.imgurl}.png`},null,8,d),(0,a._)("p",u,(0,r.zw)(t.text),1)])))),128))]),p],64)}var v={name:"StaticPart",setup(){const t=[{imgurl:"超市",text:"超市便利"},{imgurl:"菜市场",text:"菜市场"},{imgurl:"水果店",text:"水果店"},{imgurl:"鲜花",text:"鲜花绿植"},{imgurl:"医药健康",text:"医药健康"},{imgurl:"家居",text:"家居时尚"},{imgurl:"蛋糕",text:"烘培蛋糕"},{imgurl:"签到",text:"签到"},{imgurl:"大牌免运",text:"大牌免运"},{imgurl:"红包",text:"红包套餐"}];return{iconsList:t}}},h=n(3744);const g=(0,h.Z)(v,[["render",m],["__scopeId","data-v-e1b0919e"]]);var f=g;const _=t=>((0,a.dD)("data-v-4cf39126"),t=t(),(0,a.Cn)(),t),w={class:"nearby"},b=_((()=>(0,a._)("h3",{class:"h3"},"附近店铺",-1)));function k(t,e,n,s,o,r){const c=(0,a.up)("ShopInfo"),i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",w,[b,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.nearbyList,(t=>((0,a.wg)(),(0,a.j4)(i,{to:`/shop/${t._id}`,key:t._id},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{item:t},null,8,["item"])])),_:2},1032,["to"])))),128))])}var C=n(2262),y=n(4471),L=n(7402);const I=()=>{const t=(0,C.iH)([]),e=async()=>{const e=await(0,y.U)("/api/shop/hot-list");0===e?.errno&&e?.data?.length&&(t.value=e.data)};return{nearbyList:t,getNearbyList:e}};var D={name:"Nearby",components:{ShopInfo:L.Z},setup(){const{nearbyList:t,getNearbyList:e}=I();return e(),{nearbyList:t}}};const j=(0,h.Z)(D,[["render",k],["__scopeId","data-v-4cf39126"]]);var x=j,S=n(3849),z={name:"Home",components:{StaticPart:f,Nearby:x,Docker:S.Z}};const N=(0,h.Z)(z,[["render",o],["__scopeId","data-v-5c7dcbf3"]]);var H=N},1776:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var a=n(6252),s=n(9963);const o=t=>((0,a.dD)("data-v-038ca900"),t=t(),(0,a.Cn)(),t),r={class:"wrapper"},c=o((()=>(0,a._)("img",{class:"wrapper_img",src:"http://www.dell-lee.com/imgs/vue3/user.png"},null,-1))),i={class:"wrapper_input"},l={class:"wrapper_input"};function d(t,e,n,o,d,u){const p=(0,a.up)("Toast");return(0,a.wg)(),(0,a.iD)("div",r,[c,(0,a._)("div",i,[(0,a.wy)((0,a._)("input",{class:"content",placeholder:"请输入手机号","onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t)},null,512),[[s.nr,o.username]])]),(0,a._)("div",l,[(0,a.wy)((0,a._)("input",{class:"content",placeholder:"请输入密码",type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t)},null,512),[[s.nr,o.password]])]),(0,a._)("div",{class:"wrapper_login",onClick:e[2]||(e[2]=(...t)=>o.handleLogin&&o.handleLogin(...t))},"登录"),(0,a._)("div",{class:"wrapper_link",onClick:e[3]||(e[3]=(...t)=>o.handleRegister&&o.handleRegister(...t))},"立即注册"),o.toastData.showToast?((0,a.wg)(),(0,a.j4)(p,{key:0,message:o.toastData.toastMessage},null,8,["message"])):(0,a.kq)("",!0)])}var u=n(2119),p=n(2262),m=n(4471),v=n(5217),h={name:"Login",components:{Toast:v.Z},setup(){const t=(0,u.tv)(),{toastData:e,showToast:n}=(0,v.p)(),a=(0,p.qj)({username:"",password:""}),s=async()=>{try{const e=await(0,m.v)("/api/user/login",{username:a.username,password:a.password});0===e?.errno?(localStorage.isLogin=!0,t.push({name:"Home"})):n("登录失败")}catch(e){n("请求失败")}},o=()=>{t.push({name:"Register"})},{username:r,password:c}=(0,p.BK)(a);return{handleLogin:s,handleRegister:o,username:r,password:c,toastData:e}}},g=n(3744);const f=(0,g.Z)(h,[["render",d],["__scopeId","data-v-038ca900"]]);var _=f},1509:function(t,e,n){n.r(e),n.d(e,{default:function(){return A}});var a=n(6252),s=n(3577),o=n(9963);const r=t=>((0,a.dD)("data-v-63f99654"),t=t(),(0,a.Cn)(),t),c={class:"wrapper"},i={class:"order"},l={class:"order_price"},d=(0,a.Uk)("实付金额 "),u=r((()=>(0,a._)("h3",{class:"title"},"确认要离开收银台？",-1))),p=r((()=>(0,a._)("p",{class:"dsc"},"请尽快完成支付，否则将被取消",-1))),m={class:"btns"};function v(t,e,n,r,v,h){const g=(0,a.up)("Top"),f=(0,a.up)("ProductList");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(g),(0,a.Wm)(f),(0,a._)("div",i,[(0,a._)("div",l,[d,(0,a._)("b",null,"¥"+(0,s.zw)(r.productCompute.price),1)]),(0,a._)("div",{class:"order_btn",onClick:e[0]||(e[0]=()=>r.handleSubmit(!0))},"提交订单")]),(0,a.wy)((0,a._)("div",{class:"mask",onClick:e[4]||(e[4]=()=>r.handleSubmit(!0))},[(0,a._)("div",{class:"mask_content",onClick:e[3]||(e[3]=(0,o.iM)((()=>{}),["stop"]))},[u,p,(0,a._)("div",m,[(0,a._)("div",{class:"btn btn1",onClick:e[1]||(e[1]=()=>r.handleConfirm(!0))},"取消订单"),(0,a._)("div",{class:"btn btn2",onClick:e[2]||(e[2]=()=>r.handleConfirm(!1))},"确认支付")])])],512),[[o.F8,r.showConfirm]])])}var h=n(3426),g=n(2119),f=n(4471),_=n(3907),w=n(2262);const b={class:"top"},k={class:"top_header"},C=(0,a.Uk)(" 确认订单 "),y=(0,a.uE)('<div class="top_receiver" data-v-b3295626><div class="title" data-v-b3295626>收货地址</div><div class="address" data-v-b3295626>北京理工大学国防科技园2号楼10层</div><div class="info" data-v-b3295626><span class="info_name" data-v-b3295626>李先生</span><span class="info_name" data-v-b3295626>18911024266</span></div><div class="iconfont enter" data-v-b3295626></div></div>',1);function L(t,e,n,s,o,r){return(0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("div",k,[(0,a._)("div",{class:"iconfont back",onClick:e[0]||(e[0]=(...t)=>s.handleBack&&s.handleBack(...t))},""),C]),y])}var I={name:"Top",setup(){const t=(0,g.tv)(),e=()=>{t.back()};return{handleBack:e}}},D=n(3744);const j=(0,D.Z)(I,[["render",L],["__scopeId","data-v-b3295626"]]);var x=j;const S={class:"products"},z={class:"products_title"},N={class:"products__wrapper"},H={class:"products_list"},T={key:0,class:"item"},Z=["src"],P={class:"detail"},U={class:"title"},O={class:"price"},R={class:"yen"},Y={class:"total"},q={class:"yen"};function E(t,e,n,o,r,c){return(0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("div",z,(0,s.zw)(o.shopName),1),(0,a._)("div",N,[(0,a._)("div",H,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.productList,(t=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t._id},[t.count>0?((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("img",{src:t.imgUrl,class:"img"},null,8,Z),(0,a._)("div",P,[(0,a._)("h4",U,(0,s.zw)(t.name),1),(0,a._)("p",O,[(0,a._)("span",R,"¥"+(0,s.zw)(t.price)+" x "+(0,s.zw)(t.count),1),(0,a._)("span",Y,[(0,a._)("span",q,"¥"+(0,s.zw)((t.price*t.count).toFixed(2)),1)])])])])):(0,a.kq)("",!0)],64)))),128))])])])}var K={name:"ProductLIst",setup(){const t=(0,g.yj)(),e=t.params.id,{productList:n,shopName:a}=(0,h.j)(e);return{productList:n,shopName:a}}};const M=(0,D.Z)(K,[["render",E],["__scopeId","data-v-6f95b4b5"]]);var W=M,B={name:"Order",components:{Top:x,ProductList:W},setup(){const t=(0,g.tv)(),e=(0,g.yj)(),n=(0,_.oR)(),a=(0,w.iH)(!1),s=parseInt(e.params.id,10),{productCompute:o,shopName:r,productList:c}=(0,h.j)(s),i=t=>{a.value=t},l=async e=>{const a=[];for(let t in c.value){const e=c.value[t];a.push({id:parseInt(e._id,10),num:e.count})}try{const o=await(0,f.v)("/api/order",{addressId:1,shopId:s,shopName:r.value,isCanceled:e,products:a});console.log(o),0===o?.errno&&(n.commit("clearCartData",s),t.push({name:"OrderList"}))}catch(o){}};return{productCompute:o,handleConfirm:l,showConfirm:a,handleSubmit:i}}};const F=(0,D.Z)(B,[["render",v],["__scopeId","data-v-63f99654"]]);var A=F},5749:function(t,e,n){n.r(e),n.d(e,{default:function(){return I}});var a=n(6252),s=n(3577);const o=t=>((0,a.dD)("data-v-e0abfbe2"),t=t(),(0,a.Cn)(),t),r={class:"wrapper"},c=o((()=>(0,a._)("div",{class:"title"},"我的订单",-1))),i={class:"orders"},l={class:"name"},d={class:"status"},u={class:"content"},p={class:"imgs"},m=["src"],v={class:"info"},h={class:"price"},g={class:"num"};function f(t,e,n,o,f,_){const w=(0,a.up)("Docker");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[c,(0,a._)("div",i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"order",key:e},[(0,a._)("div",l,[(0,a.Uk)((0,s.zw)(t.shopName)+" ",1),(0,a._)("span",d,(0,s.zw)(t.isCanceled?"已取消":"已下单"),1)]),(0,a._)("div",u,[(0,a._)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.products,((t,e)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e},[e<=3?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"img",src:t.product.img},null,8,m)):(0,a.kq)("",!0)],64)))),128))]),(0,a._)("div",v,[(0,a._)("div",h,"¥"+(0,s.zw)(t.total),1),(0,a._)("div",g,"共"+(0,s.zw)(t.num)+"件",1)])])])))),128))])]),(0,a.Wm)(w,{currentIndex:2})],64)}var _=n(2262),w=n(4471),b=n(3849);const k=()=>{const t=(0,_.qj)({list:[]}),e=async()=>{const e=await(0,w.U)("/api/order");if(0===e?.errno&&e?.data?.length){const n=e.data;n.forEach((t=>{const e=t.products;let n=0,a=0;e.forEach((t=>{a+=t.orderSales||0,n+=t.product.price*t.product.orderSales})),t.total=n,t.num=a})),console.log(n),t.list=e.data}};e();const{list:n}=(0,_.BK)(t);return{list:n}};var C={name:"OrderList",components:{Docker:b.Z},setup(){const{list:t}=k();return{list:t}}},y=n(3744);const L=(0,y.Z)(C,[["render",f],["__scopeId","data-v-e0abfbe2"]]);var I=L},3732:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var a=n(6252),s=n(9963);const o=t=>((0,a.dD)("data-v-3a5e8c42"),t=t(),(0,a.Cn)(),t),r={class:"wrapper"},c=o((()=>(0,a._)("img",{class:"wrapper_img",src:"http://www.dell-lee.com/imgs/vue3/user.png"},null,-1))),i={class:"wrapper_input"},l={class:"wrapper_input"},d={class:"wrapper_input"};function u(t,e,n,o,u,p){const m=(0,a.up)("Toast");return(0,a.wg)(),(0,a.iD)("div",r,[c,(0,a._)("div",i,[(0,a.wy)((0,a._)("input",{class:"content",placeholder:"请输入手机号","onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t)},null,512),[[s.nr,o.username]])]),(0,a._)("div",l,[(0,a.wy)((0,a._)("input",{class:"content",placeholder:"请输入密码","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t)},null,512),[[s.nr,o.password]])]),(0,a._)("div",d,[(0,a.wy)((0,a._)("input",{class:"content",placeholder:"确认密码","onUpdate:modelValue":e[2]||(e[2]=t=>o.ensurement=t)},null,512),[[s.nr,o.ensurement]])]),(0,a._)("div",{class:"wrapper_register",onClick:e[3]||(e[3]=(...t)=>o.handleRegister&&o.handleRegister(...t))},"注册"),(0,a._)("div",{class:"wrapper_link",onClick:e[4]||(e[4]=(...t)=>o.handle&&o.handle(...t))},"已有账号去登陆"),o.show?((0,a.wg)(),(0,a.j4)(m,{key:0,message:o.toastMessage},null,8,["message"])):(0,a.kq)("",!0)])}var p=n(2119),m=n(2262),v=n(4471),h=n(5217);const g=t=>{const e=(0,p.tv)(),n=(0,m.qj)({username:"",password:"",ensurement:""}),a=async()=>{try{const a=await(0,v.v)("/api/user/register",{username:n.username,password:n.password});0===a?.errno?e.push({name:"Login"}):t("注册失败")}catch(a){t("请求失败")}},{username:s,password:o,ensurement:r}=(0,m.BK)(n);return{username:s,password:o,ensurement:r,handleRegister:a}},f=()=>{const t=(0,p.tv)(),e=()=>{t.push({name:"Login"})};return{handle:e}};var _={name:"Register",components:{Toast:h.Z},setup(){const{show:t,toastMessage:e,showToast:n}=(0,h.p)(),{username:a,password:s,ensurement:o,handleRegister:r}=g(n),{handle:c}=f();return{username:a,password:s,ensurement:o,handleRegister:r,show:t,toastMessage:e,handle:c}}},w=n(3744);const b=(0,w.Z)(_,[["render",u],["__scopeId","data-v-3a5e8c42"]]);var k=b},2854:function(t,e,n){n.r(e),n.d(e,{default:function(){return _t}});var a=n(6252);const s=t=>((0,a.dD)("data-v-98230b3a"),t=t(),(0,a.Cn)(),t),o={class:"wrapper"},r={class:"search"},c=s((()=>(0,a._)("div",{class:"text"},[(0,a._)("span",{class:"icon iconfont"},""),(0,a._)("input",{class:"input",placeholder:"请输入商品名称"})],-1)));function i(t,e,n,s,i,l){const d=(0,a.up)("ShopInfo"),u=(0,a.up)("Content"),p=(0,a.up)("Cart");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",r,[(0,a._)("div",{class:"back iconfont",onClick:e[0]||(e[0]=(...t)=>s.handleBack&&s.handleBack(...t))},""),c]),(0,a.Wm)(d,{item:s.data.item},null,8,["item"]),(0,a.Wm)(u,{shopName:s.data.item.name},null,8,["shopName"]),(0,a.Wm)(p)])}var l=n(2262),d=n(2119),u=n(4471),p=n(7402),m=n(3577);const v=t=>((0,a.dD)("data-v-5bd8043a"),t=t(),(0,a.Cn)(),t),h={class:"content"},g={class:"left"},f=["onClick"],_={class:"product"},w=["src"],b={class:"detail"},k={class:"title"},C={class:"sales"},y={class:"price"},L=v((()=>(0,a._)("span",{class:"yen"},"¥",-1))),I={class:"orign"},D={class:"product_number"},j=["onClick"],x=["onClick"];function S(t,e,n,s,o,r){return(0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.categories,(t=>((0,a.wg)(),(0,a.iD)("div",{class:(0,m.C_)({left_item:!0,active:s.currentTab===t.tab}),key:t.name,onClick:()=>s.handleCategory(t.tab)},(0,m.zw)(t.name),11,f)))),128))]),(0,a._)("div",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.list,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"product_item",key:t._id},[(0,a._)("img",{src:t.imgUrl,class:"img"},null,8,w),(0,a._)("div",b,[(0,a._)("h4",k,(0,m.zw)(t.name),1),(0,a._)("p",C,"月售"+(0,m.zw)(t.sales)+"件",1),(0,a._)("p",y,[L,(0,a.Uk)((0,m.zw)(t.price)+" ",1),(0,a._)("span",I,"¥"+(0,m.zw)(t.oldPrice),1)])]),(0,a._)("div",D,[(0,a._)("span",{class:"minus",onClick:()=>{s.changeCart(s.shopId,t._id,t,-1,n.shopName)}},"-",8,j),(0,a.Uk)(" "+(0,m.zw)(s.cartList?.[s.shopId]?.productList?.[t._id]?.count||0)+" ",1),(0,a._)("span",{class:"plus",onClick:()=>{s.changeCart(s.shopId,t._id,t,1,n.shopName)}},"+",8,x)])])))),128))])])}var z=n(3907),N=n(3426);const H=()=>{const t=(0,l.iH)(Z[0].tab),e=e=>{t.value=e};return{currentTab:t,handleCategory:e}},T=(t,e)=>{const n=(0,l.qj)({list:[]}),s=async()=>{const a=await(0,u.U)(`/api/shop/${e}/products`,{tab:t.value});0===a?.errno&&a?.data?.length&&(n.list=a.data)};(0,a.m0)((()=>{s()}));const{list:o}=(0,l.BK)(n);return{list:o}},Z=[{name:"全部商品",tab:"all"},{name:"秒杀",tab:"seckill"},{name:"新鲜水果",tab:"fruit"}];var P={name:"Content",props:["shopName"],setup(){const t=(0,d.yj)(),e=(0,z.oR)(),n=t.params.id,{currentTab:a,handleCategory:s}=H(),{list:o}=T(a,n),{changeItem:r,cartList:c}=(0,N.j)(),i=(t,n)=>{e.commit("cartShopName",{shopId:t,shopName:n})},l=(t,e,n,a,s)=>{r(t,e,n,a),i(t,s)};return{categories:Z,currentTab:a,handleCategory:s,list:o,shopId:n,changeItem:r,cartList:c,changeCart:l}}},U=n(3744);const O=(0,U.Z)(P,[["render",S],["__scopeId","data-v-5bd8043a"]]);var R=O,Y=n(9963);const q=t=>((0,a.dD)("data-v-48afe89f"),t=t(),(0,a.Cn)(),t),E={class:"cart"},K={key:0,class:"product"},M={class:"header"},W={class:"clear"},B={key:0,class:"product_item"},F=["src"],A={class:"detail"},V={class:"title"},$={class:"price"},J=q((()=>(0,a._)("span",{class:"yen"},"¥",-1))),G={class:"orign"},Q={class:"product_number"},X=["onClick"],tt=["onClick"],et={class:"check"},nt={class:"check_icon"},at={class:"tag"},st={class:"check_info"},ot=(0,a.Uk)(" 总计："),rt={class:"price"},ct={class:"check_btn"},it=(0,a.Uk)(" 去结算 ");function lt(t,e,n,s,o,r){const c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[s.showCart&&s.productCompute.total>0?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"mask",onClick:e[0]||(e[0]=(...t)=>s.handleCart&&s.handleCart(...t))})):(0,a.kq)("",!0),(0,a._)("div",E,[s.showCart&&s.productCompute.total>0?((0,a.wg)(),(0,a.iD)("div",K,[(0,a._)("div",M,[(0,a._)("div",W,[(0,a._)("span",{onClick:e[1]||(e[1]=()=>s.clearCart(s.shopId))},"清空购物车")])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.productList,(t=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t._id},[t.count>0?((0,a.wg)(),(0,a.iD)("div",B,[(0,a._)("img",{src:t.imgUrl,class:"img"},null,8,F),(0,a._)("div",A,[(0,a._)("h4",V,(0,m.zw)(t.name),1),(0,a._)("p",$,[J,(0,a.Uk)((0,m.zw)(t.price)+" ",1),(0,a._)("span",G,"¥"+(0,m.zw)(t.oldPrice),1)])]),(0,a._)("div",Q,[(0,a._)("span",{class:"minus",onClick:()=>{s.changeItem(s.shopId,t._id,t,-1)}},"-",8,X),(0,a.Uk)(" "+(0,m.zw)(t.count||0)+" ",1),(0,a._)("span",{class:"plus",onClick:()=>{s.changeItem(s.shopId,t._id,t,1)}},"+",8,tt)])])):(0,a.kq)("",!0)],64)))),128))])):(0,a.kq)("",!0),(0,a._)("div",et,[(0,a._)("div",nt,[(0,a._)("img",{src:"http://www.dell-lee.com/imgs/vue3/basket.png",class:"img",onClick:e[2]||(e[2]=(...t)=>s.handleCart&&s.handleCart(...t))}),(0,a._)("div",at,(0,m.zw)(s.productCompute.total),1)]),(0,a._)("div",st,[ot,(0,a._)("span",rt,"¥ "+(0,m.zw)(s.productCompute.price),1)]),(0,a.wy)((0,a._)("div",ct,[(0,a.Wm)(c,{to:{path:`/order/${s.shopId}`}},{default:(0,a.w5)((()=>[it])),_:1},8,["to"])],512),[[Y.F8,s.productCompute.total>0]])])])],64)}const dt=t=>{const e=(0,z.oR)(),{productList:n,changeItem:a,productCompute:s}=(0,N.j)(t),o=t=>{e.commit("clearCart",{shopId:t})};return{productCompute:s,productList:n,changeItem:a,clearCart:o}},ut=()=>{const t=(0,l.iH)(!1),e=()=>{t.value=!t.value};return{handleCart:e,showCart:t}};var pt={name:"Cart",setup(){const t=(0,d.yj)(),e=t.params.id,{handleCart:n,showCart:a}=ut(),{productCompute:s,productList:o,changeItem:r,clearCart:c}=dt(e);return{productCompute:s,productList:o,changeItem:r,shopId:e,clearCart:c,showCart:a,handleCart:n}}};const mt=(0,U.Z)(pt,[["render",lt],["__scopeId","data-v-48afe89f"]]);var vt=mt;const ht=()=>{const t=(0,d.yj)(),e=(0,l.qj)({item:{}}),n=async()=>{const n=await(0,u.U)(`/api/shop/${t.params.id}`);0===n.errno&&n.data&&(e.item=n.data)};return{data:e,getItemData:n}};var gt={name:"Shop",components:{ShopInfo:p.Z,Content:R,Cart:vt},setup(){const{data:t,getItemData:e}=ht();e();const n=(0,d.tv)(),a=()=>{n.back()};return{data:t,handleBack:a,getItemData:e}}};const ft=(0,U.Z)(gt,[["render",i],["__scopeId","data-v-98230b3a"]]);var _t=ft}},e={};function n(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,a,s,o){if(!a){var r=1/0;for(d=0;d<t.length;d++){a=t[d][0],s=t[d][1],o=t[d][2];for(var c=!0,i=0;i<a.length;i++)(!1&o||r>=o)&&Object.keys(n.O).every((function(t){return n.O[t](a[i])}))?a.splice(i--,1):(c=!1,o<r&&(r=o));if(c){t.splice(d--,1);var l=s();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,s,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,a){return n.f[a](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/home.f36f3e5e.js"}}(),function(){n.miniCssF=function(t){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="jingdong:";n.l=function(a,s,o,r){if(t[a])t[a].push(s);else{var c,i;if(void 0!==o)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==e+o){c=u;break}}c||(i=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.setAttribute("data-webpack",e+o),c.src=a),t[a]=[s];var p=function(e,n){c.onerror=c.onload=null,clearTimeout(m);var s=t[a];if(delete t[a],c.parentNode&&c.parentNode.removeChild(c),s&&s.forEach((function(t){return t(n)})),e)return e(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),i&&document.head.appendChild(c)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p=""}(),function(){var t={143:0};n.f.j=function(e,a){var s=n.o(t,e)?t[e]:void 0;if(0!==s)if(s)a.push(s[2]);else{var o=new Promise((function(n,a){s=t[e]=[n,a]}));a.push(s[2]=o);var r=n.p+n.u(e),c=new Error,i=function(a){if(n.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var o=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",c.name="ChunkLoadError",c.type=o,c.request=r,s[1](c)}};n.l(r,i,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,o,r=a[0],c=a[1],i=a[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(s in c)n.o(c,s)&&(n.m[s]=c[s]);if(i)var d=i(n)}for(e&&e(a);l<r.length;l++)o=r[l],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(d)},a=self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(8434)}));a=n.O(a)})();
//# sourceMappingURL=app.e531a916.js.map